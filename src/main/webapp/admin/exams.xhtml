<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:components="http://xmlns.jcp.org/jsf/composite/components">
<f:view>
    <h:head>
        <title>Sınavlar</title>
    </h:head>
    <ui:decorate template="/WEB-INF/templates/master.xhtml">
    <p:outputPanel styleClass="pageFormDiv clearfix" style="margin:0px; padding: 0px;float:left;width: 100%;" >

    <h:form id="pageForm">
        <p:outputPanel id="pagePanel">
            <p:outputLabel value="#{msg.school}:" for="refSchool" style="margin-left:10px;"/>
            <p:selectOneMenu id="refSchool" value="#{examsDao.item.refSchool}" title="RefSchool"
                             required="true" requiredMessage="The RefSchool field is required.">
                <f:selectItems value="#{schoolsDao.all}" var="man"
                               itemLabel="#{man.name}" itemValue="#{man}"/>
            </p:selectOneMenu>
            <p:outputLabel value="#{msg.exam_year}:" for="refExamYear" style="margin-left:10px;"/>
            <p:selectOneMenu id="refExamYear" value="#{examsDao.item.refExamYear}" title="RefExamYear"
                             required="true" requiredMessage="The RefSchool field is required.">
                <f:selectItems value="#{examsYearDao.all}" var="man"
                               itemLabel="#{man.name}" itemValue="#{man}"/>
            </p:selectOneMenu>
            <p:outputLabel value="#{msg.exam_season}:" for="refExamSeason" style="margin-left:10px;"/>
            <p:selectOneMenu id="refExamSeason" value="#{examsDao.item.refExamSeason}" title="RefExamSeason"
                             >
                <f:selectItems value="#{examsSeasonDao.all}" var="man"
                               itemLabel="#{man.nameTr}" itemValue="#{man}"/>
            </p:selectOneMenu>
            <p:selectOneMenu id="refExamSeasonNumber" value="#{examsDao.item.refExamSeasonNumber}"
                             title="RefExamSeasonNumber" >
                <f:selectItems value="#{examsSeasonNumberDao.all}" var="man"
                               itemLabel="#{man.name}" itemValue="#{man}"/>
            </p:selectOneMenu>
            <p:outputLabel value=". #{msg.exam}" for="refExamSeason" style="margin-left:10px;"/>

            <p:separator/>
            <p:outputLabel value="#{msg.exam_name}:" for="nameTr" style="margin-left:10px;"/>
            <p:inputText id="nameTr" value="#{examsDao.item.nameTr}" title="NameTr" size="40" style="margin:5px;"
                         required="true" requiredMessage="#{msg.exam_name} field is required."/>
            <p:outputLabel value="NameEn:" for="nameEn" rendered="false"/>
            <p:inputText id="nameEn" value="#{examsDao.item.nameEn}" title="NameEn" rendered="false"/>
            <p:outputLabel value="#{msg.global_date}:" for="date" style="margin-left:10px;"/>
            <p:calendar id="date" value="#{examsDao.item.date}" title="Date" showOn="button"
                        pattern="dd/MM/yyyy HH:mm:ss" navigator="true"/>
            <br/>

            <p:outputLabel value="#{msg.exam_number}:" for="number" style="margin:0 10px;"/>
            <p:inputText id="number" value="#{examsDao.item.number}" title="Number"/>
            <p:separator/>

            <span style="font-size: 24px;display: none;">Dersler</span>
            <p:outputPanel style="width: 795px;" id="lessonsPanel">
                <components:lessonsGrid tableStyle="700px;" widgetVar="lessonsWidget"
                                        paginator="false" editable="true"/>
            </p:outputPanel>
            <p:panelGrid columns="2" style="width: 100%;">
                <p:outputLabel value="Toplam soru sayısı : #{lessonsDao.sumQuestionCount}"
                        id="questionCount" />
                <p:commandButton value="Ders Ekle" style="text-align: right;"
                                 actionListener="#{lessonsDao.addLesson}"
                                 process="@this"
                                 update="@widgetVar(lessonsWidget)"
                                 />
            </p:panelGrid>

            <p:separator/>
            <p:panelGrid columns="4">
                <p:outputLabel value="#{msg.exam_answer_count}:" for="answerType"/>
                <p:selectOneMenu id="answerType" value="#{examsDao.item.refAnswerType}" title="answerType"
                                 required="true" requiredMessage="The answerType field is required.">
                    <f:selectItems value="#{examsAnswerTypeDao.all}" var="man"
                                   itemLabel="#{man.name}" itemValue="#{man}"/>
                </p:selectOneMenu>

                <p:outputLabel value="#{msg.exam_booklet_count}:" for="bookletCount"/>
                <p:selectOneMenu id="bookletCount" value="#{examsDao.item.refBookletType}" title="bookletCount"
                                 required="true" requiredMessage="The bookletCount field is required.">
                    <f:selectItems value="#{examsBookletTypeDao.all}" var="man"
                                   itemLabel="#{man.name}" itemValue="#{man}"/>
                </p:selectOneMenu>

                <p:outputLabel value="#{msg.exam_false_delete}:" for="falseDelete"/>
                <p:selectOneMenu id="falseDelete" value="#{examsDao.item.refFalseType}" title="falseDelete"
                                 required="true" requiredMessage="The falseDelete field is required.">
                    <f:selectItems value="#{examsFalseTypeDao.all}" var="man"
                                   itemLabel="#{man.name}" itemValue="#{man}"/>
                </p:selectOneMenu>
                <p:outputLabel value="#{msg.exam_time} :" for="time" style="margin-left:10px;"/>
                <p:inputText id="time" value="#{examsDao.item.time}" title="Time" size="4" style="margin:5px;"
                             />
            </p:panelGrid>
            <p:outputLabel value="RefExamType:" for="refExamType" rendered="false"/>
            <p:selectOneMenu id="refExamType" value="#{examsDao.item.refExamType}"
                             title="RefExamType" rendered="false"
                             required="true" requiredMessage="The RefExamType field is required.">
                <f:selectItems value="#{fixme}"/>
            </p:selectOneMenu>
            <br/>
            <p:panelGrid columns="2" rendered="false">
                <h:outputLabel value="EntityInfo:"/>
                <components:entityInfo daobean="#{examsDao}"/>
            </p:panelGrid>
        </p:outputPanel>

        <h:inputHidden id="status" value="#{examsDao.status}"/>
        <h:inputHidden id="disabledelete" value="#{examsDao.disabledelete}"/>
        <h:messages rendered="false"/>
    </h:form>
        <components:toolbar gridname="examsGrid" daobean="#{examsDao}" print="false" />

        <p:dialog id="gridDialog" header="#{msg.exams}" widgetVar="pageGrid"
                  modal="true" resizable="true" dynamic="true" appendTo="@(body)"  >
            <components:examsGrid rows="5"  scrollable="true" update=":#{p:component('pageForm')} "
                                    widgetVar="examsGridWidget"/>
        </p:dialog>

    </p:outputPanel>
    </ui:decorate>
</f:view>
</html>
