# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.
image:
  file: .gitpod.DockerFile
tasks:
  - name: dependencies
    init: | 
      mysql -u root -e "GRANT ALL PRIVILEGES ON *.* TO 'orsdb'@'%' WITH GRANT OPTION;"
      mysql -u root -e "FLUSH PRIVILEGES;" 
      mysql -u root < init/orsdb.sql
      sudo mkdir /home/admin
      sudo unzip init/uploads.zip -d /home/admin
      wget -c https://downloads.apache.org/tomcat/tomcat-9/v9.0.70/bin/apache-tomcat-9.0.70.tar.gz -P /workspace
      tar -xf /workspace/apache-tomcat-9.0.70.tar.gz -C /workspace
      cp deployments/ors.war /workspace/apache-tomcat-9.0.70/webapps/

    command: sh /workspace/apache-tomcat-9.0.70/bin/catalina.sh run 